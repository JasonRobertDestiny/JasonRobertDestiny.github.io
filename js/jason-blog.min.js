/*!
 * Clean Blog v1.0.0 (http://startbootstrap.com)
 * Copyright 2015 Start Bootstrap
 * Licensed under Apache 2.0 (https://github.com/IronSummitMedia/startbootstrap/blob/gh-pages/LICENSE)
 */
/*!
 * Jason's Blog v1.6.0 (http://startbootstrap.com)
 * Copyright 2016 @JasonRobertDestiny
 * Licensed under Apache 2.0 
 */
$(document).ready(function(){$("table").wrap("<div class='table-responsive'></div>"),$("table").addClass("table")}),$(document).ready(function(){$('iframe[src*="youtube.com"]').wrap('<div class="embed-responsive embed-responsive-16by9"></div>'),$('iframe[src*="youtube.com"]').addClass("embed-responsive-item"),$('iframe[src*="vimeo.com"]').wrap('<div class="embed-responsive embed-responsive-16by9"></div>'),$('iframe[src*="vimeo.com"]').addClass("embed-responsive-item")}),jQuery(document).ready(function(e){if(e(window).width()>768){var a=e('<div class="cursor-glow"></div>').appendTo("body");e(document).on("mousemove",function(e){a.css({left:e.clientX,top:e.clientY})}),e("a, button, .navbar-toggle, .search-toggle").on("mouseenter",function(){a.css("opacity","1")}).on("mouseleave",function(){a.css("opacity","0")})}function t(){var a=e(window).scrollTop(),t=.9*e(window).height();e(".scroll-reveal").each(function(){var n=e(this),o=n.offset().top;a+t>o&&n.addClass("revealed")})}e(window).on("scroll",t),t(),e(".catalog-toggle").on("click",function(a){a.preventDefault();var t=e(this).closest(".side-catalog").find(".catalog-body");e(this).toggleClass("active"),t.slideToggle(300)}),e('a[href*="#"]:not([href="#"])').on("click",function(a){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")||location.hostname==this.hostname){var t=e(this.hash);(t=t.length?t:e("[name="+this.hash.slice(1)+"]")).length&&(a.preventDefault(),e("html,body").animate({scrollTop:t.offset().top-70},800,"swing"),t.addClass("highlighted"),setTimeout(function(){t.removeClass("highlighted")},2e3))}}),e(".tags a, #tag_cloud a").on("mouseenter",function(){e(this).addClass("tag-animate")}).on("mouseleave",function(){e(this).removeClass("tag-animate")}),e(".post-container img").on("load",function(){e(this).addClass("img-loaded")}),e(".typewriter").each(function(){var a=e(this).text();!function(e,a,t=50){var n=0;e.text(""),function o(){n<a.length&&(e.append(a.charAt(n)),n++,setTimeout(o,t))}()}(e(this),a,30)}),e(".counter").each(function(){var a=e(this),t=parseInt(a.text());a.waypoint(function(){!function(e,a,t,n){var o=null,i=function(s){o||(o=s);var l=Math.min((s-o)/n,1);e.text(Math.floor(l*(t-a)+a)),l<1&&window.requestAnimationFrame(i)};window.requestAnimationFrame(i)}(a,0,t,2e3),this.destroy()},{offset:"80%"})}),e(window).on("load",function(){e(".fade-in").each(function(a){var t=e(this);setTimeout(function(){t.addClass("visible")},100*a)})}),e(".parallax-element").on("mousemove",function(a){var t=e(this),n=a.clientX/window.innerWidth,o=a.clientY/window.innerHeight;t.find(".parallax-layer").each(function(){var a=e(this).data("speed")||10,t=-n*a,i=-o*a;e(this).css({transform:"translate("+t+"px, "+i+"px)"})})});var n=e('<a href="#" class="back-to-top"><i class="fa fa-arrow-up"></i></a>').appendTo("body");e(window).on("scroll",function(){e(this).scrollTop()>300?n.addClass("show"):n.removeClass("show")}),n.on("click",function(a){a.preventDefault(),e("html, body").animate({scrollTop:0},800,"swing")});var o,i=e('<div class="reading-progress"></div>').appendTo("body");if(e(window).on("scroll",function(){var a=e(window).height(),t=e(document).height(),n=e(window).scrollTop(),o=t-a,s=Math.floor(n/o*100);i.css("width",s+"%")}),e(".dark-mode-toggle").on("click",function(){e("body").toggleClass("dark-mode"),localStorage.setItem("darkMode",e("body").hasClass("dark-mode"))}),"true"===localStorage.getItem("darkMode")&&e("body").addClass("dark-mode"),e(".search-toggle").on("click",function(){var a=e(".search-form");0===a.length&&(a=e('<div class="search-form"><input type="text" placeholder="搜索文章..." autocomplete="off"></div>'),e("body").append(a),a.find("input").on("input",function(){e(this).val().toLowerCase()})),a.fadeToggle(200),a.is(":visible")&&a.find("input").focus()}),e("img").each(function(){var a=e(this);a.parent().hasClass("img-hover-zoom")||a.wrap('<div class="img-hover-zoom"></div>')}),e(".tags a, .nav-link, .tech-button").addClass("ripple"),e(window).width()>1170){var s=e(".navbar-custom").height(),l=e(".intro-header .container").height();e(window).on("scroll",{previousTop:0},function(){var a=e(window).scrollTop(),t=e(".side-catalog");a<this.previousTop?a>0&&e(".navbar-custom").hasClass("is-fixed")?e(".navbar-custom").addClass("is-visible"):e(".navbar-custom").removeClass("is-visible is-fixed"):(e(".navbar-custom").removeClass("is-visible"),a>s&&!e(".navbar-custom").hasClass("is-fixed")&&e(".navbar-custom").addClass("is-fixed")),this.previousTop=a,t.show(),a>l+41?t.addClass("fixed"):t.removeClass("fixed")})}e('a[href^="#"]').on("click",function(a){var t=e(this.getAttribute("href"));t.length&&(a.preventDefault(),e("html, body").animate({scrollTop:t.offset().top-70},800))}),setTimeout(function(){e(".fade-in").addClass("visible")},100),e(document).on("click",".lang-btn[data-lang], .lang-toggle__btn[data-lang]",function(a){a.preventDefault();var t=e(this).data("lang");"function"==typeof window.switchLanguage&&window.switchLanguage(t)}),window.switchLanguage=function(a){"en"!==a&&"zh"!==a&&(console.warn("Invalid language code:",a),a="en"),localStorage.setItem("preferredLanguage",a),"en"===a?(e(".lang-en, .en.post-container").fadeIn(300),e(".lang-zh, .zh.post-container").fadeOut(300),e(".lang-btn-en").addClass("active"),e(".lang-btn-zh").removeClass("active"),e(".lang-toggle__btn--en").addClass("active").attr("aria-checked","true"),e(".lang-toggle__btn--zh").removeClass("active").attr("aria-checked","false"),e(".lang-toggle").attr("data-active-lang","en")):(e(".lang-zh, .zh.post-container").fadeIn(300),e(".lang-en, .en.post-container").fadeOut(300),e(".lang-btn-zh").addClass("active"),e(".lang-btn-en").removeClass("active"),e(".lang-toggle__btn--zh").addClass("active").attr("aria-checked","true"),e(".lang-toggle__btn--en").removeClass("active").attr("aria-checked","false"),e(".lang-toggle").attr("data-active-lang","zh")),e("html").attr("lang","en"===a?"en":"zh-CN"),setTimeout(function(){"function"==typeof generateCatalog&&generateCatalog(".catalog-body")},350),e(document).trigger("languageChanged",[a])},window.onLanChange=function(e){switchLanguage("1"===e?"en":"zh")},o=localStorage.getItem("preferredLanguage")||"en",switchLanguage(o),e(document).on("keydown",function(e){if(e.altKey&&76===e.keyCode){e.preventDefault();var a=localStorage.getItem("preferredLanguage")||"en";switchLanguage("en"===a?"zh":"en")}}),e(document).on("languageChanged",function(e,a){console.log("Language changed to:",a)})});