$(document).ready(function(){$("table").wrap("<div class='table-responsive'></div>"),$("table").addClass("table")}),$(document).ready(function(){$('iframe[src*="youtube.com"]').wrap('<div class="embed-responsive embed-responsive-16by9"></div>'),$('iframe[src*="youtube.com"]').addClass("embed-responsive-item"),$('iframe[src*="vimeo.com"]').wrap('<div class="embed-responsive embed-responsive-16by9"></div>'),$('iframe[src*="vimeo.com"]').addClass("embed-responsive-item")}),jQuery(document).ready(function(i){var a;function e(){var a=i(window).scrollTop(),o=.9*i(window).height();i(".scroll-reveal").each(function(){var e=i(this);e.offset().top<a+o&&e.addClass("revealed")})}function o(a,o,n,t){function i(e){s=s||e,e=Math.min((e-s)/t,1),a.text(Math.floor(e*(n-o)+o)),e<1&&window.requestAnimationFrame(i)}var s=null;window.requestAnimationFrame(i)}768<i(window).width()&&(a=i('<div class="cursor-glow"></div>').appendTo("body"),i(document).on("mousemove",function(e){a.css({left:e.clientX,top:e.clientY})}),i("a, button, .navbar-toggle, .search-toggle").on("mouseenter",function(){a.css("opacity","1")}).on("mouseleave",function(){a.css("opacity","0")})),i(window).on("scroll",e),e(),i(".catalog-toggle").on("click",function(e){e.preventDefault();e=i(this).closest(".side-catalog").find(".catalog-body");i(this).toggleClass("active"),e.slideToggle(300)}),i('a[href*="#"]:not([href="#"])').on("click",function(e){var a;location.pathname.replace(/^\//,"")!=this.pathname.replace(/^\//,"")&&location.hostname!=this.hostname||(a=(a=i(this.hash)).length?a:i("[name="+this.hash.slice(1)+"]")).length&&(e.preventDefault(),i("html,body").animate({scrollTop:a.offset().top-70},800,"swing"),a.addClass("highlighted"),setTimeout(function(){a.removeClass("highlighted")},2e3))}),i(".tags a, #tag_cloud a").on("mouseenter",function(){i(this).addClass("tag-animate")}).on("mouseleave",function(){i(this).removeClass("tag-animate")}),i(".post-container img").on("load",function(){i(this).addClass("img-loaded")}),i(".typewriter").each(function(){var a,o,n,t,e=i(this).text();a=i(this),o=e,n=30,t=0,a.text(""),function e(){t<o.length&&(a.append(o.charAt(t)),t++,setTimeout(e,n))}()}),i(".counter").each(function(){var e=i(this),a=parseInt(e.text());e.waypoint(function(){o(e,0,a,2e3),this.destroy()},{offset:"80%"})}),i(window).on("load",function(){i(".fade-in").each(function(e){var a=i(this);setTimeout(function(){a.addClass("visible")},100*e)})}),i(".parallax-element").on("mousemove",function(e){var a=i(this),o=e.clientX/window.innerWidth,n=e.clientY/window.innerHeight;a.find(".parallax-layer").each(function(){var e=i(this).data("speed")||10,a=-o*e,e=-n*e;i(this).css({transform:"translate("+a+"px, "+e+"px)"})})});var n,t,s,l=i('<a href="#" class="back-to-top"><i class="fa fa-arrow-up"></i></a>').appendTo("body"),d=(i(window).on("scroll",function(){300<i(this).scrollTop()?l.addClass("show"):l.removeClass("show")}),l.on("click",function(e){e.preventDefault(),i("html, body").animate({scrollTop:0},800,"swing")}),i('<div class="reading-progress"></div>').appendTo("body"));i(window).on("scroll",function(){var e=i(window).height(),a=i(document).height(),o=i(window).scrollTop(),o=Math.floor(o/(a-e)*100);d.css("width",o+"%")}),i(".dark-mode-toggle").on("click",function(){i("body").toggleClass("dark-mode"),localStorage.setItem("darkMode",i("body").hasClass("dark-mode"))}),"true"===localStorage.getItem("darkMode")&&i("body").addClass("dark-mode"),i(".search-toggle").on("click",function(){var e=i(".search-form");0===e.length&&(e=i('<div class="search-form"><input type="text" placeholder="搜索文章..." autocomplete="off"></div>'),i("body").append(e),e.find("input").on("input",function(){i(this).val().toLowerCase()})),e.fadeToggle(200),e.is(":visible")&&e.find("input").focus()}),i("img").each(function(){var e=i(this);e.parent().hasClass("img-hover-zoom")||e.wrap('<div class="img-hover-zoom"></div>')}),i(".tags a, .nav-link, .tech-button").addClass("ripple"),1170<i(window).width()&&(n=i(".navbar-custom").height(),t=i(".intro-header .container").height(),i(window).on("scroll",{previousTop:0},function(){var e=i(window).scrollTop(),a=i(".side-catalog");e<this.previousTop?0<e&&i(".navbar-custom").hasClass("is-fixed")?i(".navbar-custom").addClass("is-visible"):i(".navbar-custom").removeClass("is-visible is-fixed"):(i(".navbar-custom").removeClass("is-visible"),n<e&&!i(".navbar-custom").hasClass("is-fixed")&&i(".navbar-custom").addClass("is-fixed")),this.previousTop=e,a.show(),t+41<e?a.addClass("fixed"):a.removeClass("fixed")})),i('a[href^="#"]').on("click",function(e){var a=i(this.getAttribute("href"));a.length&&(e.preventDefault(),i("html, body").animate({scrollTop:a.offset().top-70},800))}),setTimeout(function(){i(".fade-in").addClass("visible")},100),window.switchLanguage=function(e){"en"!==e&&"zh"!==e&&(console.warn("Invalid language code:",e),e="en"),localStorage.setItem("preferredLanguage",e),("en"===e?(i(".lang-en").fadeIn(300),i(".lang-zh").fadeOut(300),i(".lang-btn-en").addClass("active"),i(".lang-btn-zh")):(i(".lang-zh").fadeIn(300),i(".lang-en").fadeOut(300),i(".lang-btn-zh").addClass("active"),i(".lang-btn-en"))).removeClass("active"),i("html").attr("lang","en"===e?"en":"zh-CN"),setTimeout(function(){"function"==typeof generateCatalog&&generateCatalog(".catalog-body")},350),i(document).trigger("languageChanged",[e])},window.onLanChange=function(e){switchLanguage("1"===e?"en":"zh")},s=localStorage.getItem("preferredLanguage")||"en",switchLanguage(s),i(document).on("keydown",function(e){e.altKey&&76===e.keyCode&&(e.preventDefault(),e=localStorage.getItem("preferredLanguage")||"en",switchLanguage("en"===e?"zh":"en"))}),i(document).on("languageChanged",function(e,a){console.log("Language changed to:",a)})});