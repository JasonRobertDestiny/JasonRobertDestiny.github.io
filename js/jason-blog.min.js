$(document).ready(function(){$("table").wrap("<div class='table-responsive'></div>"),$("table").addClass("table")}),$(document).ready(function(){$('iframe[src*="youtube.com"]').wrap('<div class="embed-responsive embed-responsive-16by9"></div>'),$('iframe[src*="youtube.com"]').addClass("embed-responsive-item"),$('iframe[src*="vimeo.com"]').wrap('<div class="embed-responsive embed-responsive-16by9"></div>'),$('iframe[src*="vimeo.com"]').addClass("embed-responsive-item")}),jQuery(document).ready(function(s){var a;function e(){var a=s(window).scrollTop(),o=.9*s(window).height();s(".scroll-reveal").each(function(){var e=s(this);e.offset().top<a+o&&e.addClass("revealed")})}function o(a,o,n,t){function s(e){i=i||e,e=Math.min((e-i)/t,1),a.text(Math.floor(e*(n-o)+o)),e<1&&window.requestAnimationFrame(s)}var i=null;window.requestAnimationFrame(s)}768<s(window).width()&&(a=s('<div class="cursor-glow"></div>').appendTo("body"),s(document).on("mousemove",function(e){a.css({left:e.clientX,top:e.clientY})}),s("a, button, .navbar-toggle, .search-toggle").on("mouseenter",function(){a.css("opacity","1")}).on("mouseleave",function(){a.css("opacity","0")})),s(window).on("scroll",e),e(),s(".catalog-toggle").on("click",function(e){e.preventDefault();e=s(this).closest(".side-catalog").find(".catalog-body");s(this).toggleClass("active"),e.slideToggle(300)}),s('a[href*="#"]:not([href="#"])').on("click",function(e){var a;location.pathname.replace(/^\//,"")!=this.pathname.replace(/^\//,"")&&location.hostname!=this.hostname||(a=(a=s(this.hash)).length?a:s("[name="+this.hash.slice(1)+"]")).length&&(e.preventDefault(),s("html,body").animate({scrollTop:a.offset().top-70},800,"swing"),a.addClass("highlighted"),setTimeout(function(){a.removeClass("highlighted")},2e3))}),s(".tags a, #tag_cloud a").on("mouseenter",function(){s(this).addClass("tag-animate")}).on("mouseleave",function(){s(this).removeClass("tag-animate")}),s(".post-container img").on("load",function(){s(this).addClass("img-loaded")}),s(".typewriter").each(function(){var a,o,n,t,e=s(this).text();a=s(this),o=e,n=30,t=0,a.text(""),function e(){t<o.length&&(a.append(o.charAt(t)),t++,setTimeout(e,n))}()}),s(".counter").each(function(){var e=s(this),a=parseInt(e.text());e.waypoint(function(){o(e,0,a,2e3),this.destroy()},{offset:"80%"})}),s(window).on("load",function(){s(".fade-in").each(function(e){var a=s(this);setTimeout(function(){a.addClass("visible")},100*e)})}),s(".parallax-element").on("mousemove",function(e){var a=s(this),o=e.clientX/window.innerWidth,n=e.clientY/window.innerHeight;a.find(".parallax-layer").each(function(){var e=s(this).data("speed")||10,a=-o*e,e=-n*e;s(this).css({transform:"translate("+a+"px, "+e+"px)"})})});var n,t,i,l=s('<a href="#" class="back-to-top"><i class="fa fa-arrow-up"></i></a>').appendTo("body"),d=(s(window).on("scroll",function(){300<s(this).scrollTop()?l.addClass("show"):l.removeClass("show")}),l.on("click",function(e){e.preventDefault(),s("html, body").animate({scrollTop:0},800,"swing")}),s('<div class="reading-progress"></div>').appendTo("body"));s(window).on("scroll",function(){var e=s(window).height(),a=s(document).height(),o=s(window).scrollTop(),o=Math.floor(o/(a-e)*100);d.css("width",o+"%")}),s(".dark-mode-toggle").on("click",function(){s("body").toggleClass("dark-mode"),localStorage.setItem("darkMode",s("body").hasClass("dark-mode"))}),"true"===localStorage.getItem("darkMode")&&s("body").addClass("dark-mode"),s(".search-toggle").on("click",function(){var e=s(".search-form");0===e.length&&(e=s('<div class="search-form"><input type="text" placeholder="搜索文章..." autocomplete="off"></div>'),s("body").append(e),e.find("input").on("input",function(){s(this).val().toLowerCase()})),e.fadeToggle(200),e.is(":visible")&&e.find("input").focus()}),s("img").each(function(){var e=s(this);e.parent().hasClass("img-hover-zoom")||e.wrap('<div class="img-hover-zoom"></div>')}),s(".tags a, .nav-link, .tech-button").addClass("ripple"),1170<s(window).width()&&(n=s(".navbar-custom").height(),t=s(".intro-header .container").height(),s(window).on("scroll",{previousTop:0},function(){var e=s(window).scrollTop(),a=s(".side-catalog");e<this.previousTop?0<e&&s(".navbar-custom").hasClass("is-fixed")?s(".navbar-custom").addClass("is-visible"):s(".navbar-custom").removeClass("is-visible is-fixed"):(s(".navbar-custom").removeClass("is-visible"),n<e&&!s(".navbar-custom").hasClass("is-fixed")&&s(".navbar-custom").addClass("is-fixed")),this.previousTop=e,a.show(),t+41<e?a.addClass("fixed"):a.removeClass("fixed")})),s('a[href^="#"]').on("click",function(e){var a=s(this.getAttribute("href"));a.length&&(e.preventDefault(),s("html, body").animate({scrollTop:a.offset().top-70},800))}),setTimeout(function(){s(".fade-in").addClass("visible")},100),window.switchLanguage=function(e){"en"!==e&&"zh"!==e&&(console.warn("Invalid language code:",e),e="en"),localStorage.setItem("preferredLanguage",e),("en"===e?(s(".lang-en").fadeIn(300),s(".lang-zh").fadeOut(300),s(".lang-btn-en").addClass("active"),s(".lang-btn-zh")):(s(".lang-zh").fadeIn(300),s(".lang-en").fadeOut(300),s(".lang-btn-zh").addClass("active"),s(".lang-btn-en"))).removeClass("active"),s("html").attr("lang","en"===e?"en":"zh-CN"),s(document).trigger("languageChanged",[e])},window.onLanChange=function(e){switchLanguage("1"===e?"en":"zh")},i=localStorage.getItem("preferredLanguage")||"en",switchLanguage(i),s(document).on("keydown",function(e){e.altKey&&76===e.keyCode&&(e.preventDefault(),e=localStorage.getItem("preferredLanguage")||"en",switchLanguage("en"===e?"zh":"en"))}),s(document).on("languageChanged",function(e,a){console.log("Language changed to:",a)})});