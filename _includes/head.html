<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="iog9xrtHaMQ4pyqmT3spIMoVP37df47GEKtiIclzqL8" />
    <meta name="msvalidate.01" content="AF10E9C7A491D73CC4CF422DE871A651" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
    <meta name="keywords" content="{% if page.tags %}{% for tag in page.tags %}{{ tag }}{% unless forloop.last %}, {% endunless %}{% endfor %}{% else %}{{ site.keyword }}{% endif %}">
    <meta name="author" content="{% if page.author %}{{ page.author }}{% else %}{{ site.title }}{% endif %}">
    <!-- Robots directive: noindex for pagination and tag pages -->
    {% if page.url contains '/page' or page.url contains '/tags' %}
    <meta name="robots" content="noindex, follow">
    {% else %}
    <meta name="robots" content="index, follow">
    {% endif %}
    {% if page.multilingual %}
    <meta name="language" content="en, zh-CN">
    <meta http-equiv="content-language" content="en, zh-CN">
    {% else %}
    <meta name="language" content="zh-CN">
    {% endif %}
    <meta name="theme-color" content="{{ site.chrome-tab-theme-color }}">
    
    <!-- Performance Optimization - Preconnect to critical third-party origins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://avatars.githubusercontent.com" crossorigin>
    <link rel="preconnect" href="https://pagead2.googlesyndication.com" crossorigin>
    <link rel="dns-prefetch" href="//seo-fixer.writesonic.com">

    <!-- Google Fonts - Bebas Neue (display) + Source Sans 3 (body) -->
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Source+Sans+3:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    {% if page.url == '/' %}
    <!-- Preload hero header image (WebP) to improve LCP with highest priority -->
    {% assign header_img = page.header-img | default: site.header-img %}
    {% assign webp_img = header_img | replace: '.jpg', '.webp' | replace: '.jpeg', '.webp' | replace: '.png', '.webp' %}
    <link rel="preload" as="image" href="{{ site.baseurl }}/{{ webp_img }}" fetchpriority="high" type="image/webp">
    {% endif %}

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@CalderLab">
    <meta name="twitter:creator" content="@CalderLab">
    <meta name="twitter:title" content="{% if page.title %}{{ page.title }} - {{ site.title }}{% else %}{{ site.title }}{% endif %}">
    <meta name="twitter:description" content="{% if page.description %}{{ page.description }}{% elsif page.excerpt %}{{ page.excerpt | strip_html | truncate:160 }}{% else %}{{ site.description }}{% endif %}">
    <meta name="twitter:image" content="{% if page.image %}{{ site.url }}{{ page.image }}{% elsif page.header-img %}{{ site.url }}/img/{{ page.header-img }}{% else %}{{ site.url }}{{ site.sidebar-avatar }}{% endif %}">
    <meta name="twitter:image:alt" content="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}">
    
    <!-- Open Graph -->
    <meta property="og:title" content="{% if page.title %}{{ page.title }} - {{ site.SEOTitle }}{% else %}{{ site.SEOTitle }}{% endif %}">
    <meta property="og:site_name" content="{{ site.title }}">
    <meta property="og:url" content="{{ site.url }}{{ page.url | default: '/' }}">
    <meta property="og:locale" content="zh_CN">
    <meta property="og:locale:alternate" content="en_US">
    
    {% case page.layout %}
    {% when 'post' %}
    <meta property="og:type" content="article">
    <meta property="og:description" content="{% if page.description %}{{ page.description }}{% else %}{{ page.excerpt | strip_html | truncate:200 }}{% endif %}">
    <meta property="og:image" content="{% if page.image %}{{ site.url }}{{ page.image }}{% elsif page.header-img %}{{ site.url }}/img/{{ page.header-img }}{% else %}{{ site.url }}{{ site.sidebar-avatar }}{% endif %}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="{{ page.title }}">
    {% if page.date %}
    <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
    <meta property="article:modified_time" content="{{ page.date | date_to_xmlschema }}">
    {% endif %}
    {% if page.author %}
    <meta property="article:author" content="{{ page.author }}">
    {% endif %}
    {% for tag in page.tags limit:6 %}
    <meta property="article:tag" content="{{ tag }}">
    {% endfor %}
    {% if page.categories %}
    <meta property="article:section" content="{{ page.categories | first }}">
    {% endif %}
    {% else %}
    <meta property="og:type" content="website">
    <meta property="og:description" content="{% if page.description %}{{ page.description }}{% elsif page.excerpt %}{{ page.excerpt | strip_html | truncate:160 }}{% else %}{{ site.description }}{% endif %}">
    <meta property="og:image" content="{% if site.sidebar-avatar contains 'http' %}{{ site.sidebar-avatar }}{% else %}{{ site.url }}{{ site.sidebar-avatar }}{% endif %}">
    <meta property="og:image:width" content="400">
    <meta property="og:image:height" content="400">
    <meta property="og:image:alt" content="{{ site.title }}">
    {% endcase %}

    <title>{% if page.title %}{{ page.title }} - {{ site.SEOTitle }}{% else %}{{ site.SEOTitle }}{% endif %}</title>

    <!-- Web App Manifest -->
    <link rel="manifest" href="{{ site.baseurl }}/pwa/manifest.json">

    <!-- Favicon -->
    <link rel="shortcut icon" href="{{ site.baseurl }}/img/favicon.ico">
    <link rel="icon" type="image/x-icon" href="{{ site.baseurl }}/img/favicon.ico">
    <meta name="msapplication-TileColor" content="{{ site.chrome-tab-theme-color }}">
    <meta name="theme-color" content="{{ site.chrome-tab-theme-color }}">

    <!-- Canonical URL -->
    <link rel="canonical" href="{% if page.canonical %}{{ page.canonical }}{% elsif page.url == '/' %}{{ site.url }}/{% else %}{{ site.url }}{{ page.url | replace:'index.html','' }}{% endif %}">

    <!-- Hreflang Tags for Bilingual SEO -->
    {% if page.multilingual or page.url == '/' or page.url == '/index.html' or page.url == '/about/' %}
    <link rel="alternate" hreflang="en" href="{{ site.url }}{{ page.url | replace:'index.html','' }}" />
    <link rel="alternate" hreflang="zh" href="{{ site.url }}{{ page.url | replace:'index.html','' }}" />
    <link rel="alternate" hreflang="zh-CN" href="{{ site.url }}{{ page.url | replace:'index.html','' }}" />
    <link rel="alternate" hreflang="x-default" href="{{ site.url }}{{ page.url | replace:'index.html','' }}" />
    {% endif %}

    <!-- RSS Feed -->
    <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ "/feed.xml" | prepend: site.baseurl | prepend: site.url }}">

    <!-- Critical CSS Inline - Prevent CLS -->
    <style>
        /* Reset and base - Cyberpunk Brutalism */
        *,*::before,*::after{box-sizing:border-box}
        body{
            background:#0A0E15;
            min-height:100vh;
            font-family:'Source Sans 3',-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
            font-size:16px;
            line-height:1.5;
            color:#F8FAFC;
            margin:0;
            padding:0;
        }
        /* Navbar - fixed height, dark theme */
        .navbar{min-height:50px;margin-bottom:0;border:0}
        .navbar-fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}
        .navbar-custom{
            background:rgba(10,14,21,0.95);
            backdrop-filter:blur(10px);
            border-bottom:1px solid #1E293B;
            height:50px;
        }
        /* Container - Bootstrap grid basics */
        .container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}
        @media(min-width:768px){.container{width:750px}}
        @media(min-width:992px){.container{width:970px}}
        @media(min-width:1200px){.container{width:1170px}}
        .container-fluid{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}
        .row{margin-right:-15px;margin-left:-15px}
        .row::before,.row::after{display:table;content:" "}
        .row::after{clear:both}
        /* Column basics */
        .col-lg-8,.col-md-10,.col-xs-12{position:relative;min-height:1px;padding-right:15px;padding-left:15px}
        .col-xs-12{width:100%;float:left}
        @media(min-width:992px){.col-md-10{width:83.33333%;float:left}.col-md-offset-1{margin-left:8.33333%}}
        @media(min-width:1200px){.col-lg-8{width:66.66667%;float:left}.col-lg-offset-2{margin-left:16.66667%}}
        /* Intro header - Brutalist, no rounded corners */
        .intro-header{
            background-attachment:scroll;
            background-position:center center;
            background-repeat:no-repeat;
            background-size:cover;
            margin-top:50px;
            padding-top:100px;
            padding-bottom:50px;
            min-height:400px;
            position:relative;
        }
        .intro-header::after{
            content:'';
            position:absolute;
            top:0;left:0;right:0;bottom:0;
            background:linear-gradient(180deg,rgba(10,14,21,0.7) 0%,rgba(10,14,21,0.9) 100%);
        }
        @media(min-width:768px){.intro-header{min-height:500px;padding-top:150px;padding-bottom:75px}}
        .intro-header .site-heading,.intro-header .post-heading,.intro-header .page-heading{color:#F8FAFC;position:relative;z-index:1}
        .intro-header .site-heading h1,.intro-header .post-heading h1{
            font-family:'Bebas Neue',sans-serif;
            font-size:clamp(3rem,10vw,6rem);
            font-weight:400;
            letter-spacing:-0.025em;
            text-transform:uppercase;
            margin-top:0;
            color:#00FFFF;
            text-shadow:0 0 30px rgba(0,255,255,0.5);
        }
        @media(min-width:768px){.intro-header .site-heading h1,.intro-header .post-heading h1{font-size:clamp(4rem,12vw,8rem)}}
        /* Post preview - Dark cards, sharp corners */
        .post-preview{
            margin-bottom:24px;
            padding:24px;
            background:#0F1419;
            border:1px solid #1E293B;
            transition:border-color 0.2s,box-shadow 0.2s;
        }
        .post-preview:hover{
            border-color:#00FFFF;
            box-shadow:0 0 20px rgba(0,255,255,0.2);
        }
        .post-preview>.post-title{
            font-family:'Bebas Neue',sans-serif;
            font-size:24px;
            text-transform:uppercase;
            letter-spacing:-0.025em;
            margin-top:0;
            margin-bottom:8px;
            color:#F8FAFC;
        }
        .post-preview>.post-subtitle{font-size:15px;margin:0;font-weight:400;margin-bottom:12px;color:#94A3B8}
        .post-preview .post-meta{color:#64748B;font-size:14px;margin-top:0;font-family:'JetBrains Mono',monospace}
        /* Prevent image CLS */
        img{max-width:100%;height:auto;display:block}
        /* Featured section - Dark, neon accent */
        .featured-section{
            background:#0F1419;
            border:1px solid #1E293B;
            padding:32px;
            margin-bottom:40px;
            position:relative;
        }
        @media(min-width:768px){.featured-section{padding:48px}}
        .featured-section__title{
            display:flex;
            align-items:center;
            gap:12px;
            color:#00FFFF;
            font-family:'Bebas Neue',sans-serif;
            font-size:32px;
            text-transform:uppercase;
            letter-spacing:-0.025em;
            margin-bottom:24px;
        }
        .featured-section__grid{
            display:grid;
            grid-template-columns:1fr;
            gap:20px;
        }
        @media(min-width:768px){.featured-section__grid{grid-template-columns:repeat(2,1fr);gap:24px}}
        .featured-card{
            background:#141A22;
            border:1px solid #1E293B;
            padding:20px;
            transition:border-color 0.2s;
        }
        .featured-card:hover{border-color:#00FFFF}
        @media(min-width:768px){.featured-card{padding:24px}}
        .featured-card__title{font-size:18px;font-weight:600;color:#F8FAFC;margin:0 0 8px}
        .featured-card__excerpt{font-size:14px;color:#94A3B8;margin:0 0 12px;line-height:1.5}
        .featured-card__meta{font-size:12px;color:#64748B;font-family:'JetBrains Mono',monospace}
        /* Core topics section */
        .core-topics{
            background:#0F1419;
            border:1px solid #1E293B;
            padding:24px;
            margin-bottom:32px;
        }
        @media(min-width:768px){.core-topics{padding:32px}}
        .core-topics__header{
            display:flex;
            align-items:center;
            gap:10px;
            margin-bottom:20px;
        }
        .core-topics__title{
            font-family:'Bebas Neue',sans-serif;
            font-size:24px;
            text-transform:uppercase;
            color:#F8FAFC;
            margin:0;
        }
        .core-topics__tags{display:flex;flex-wrap:wrap;gap:12px}
        /* Topic tags - Brutalist, no rounded */
        .topic-tag{
            display:inline-flex;
            align-items:center;
            gap:8px;
            padding:10px 20px;
            font-size:14px;
            font-weight:500;
            text-decoration:none;
            border:1px solid #1E293B;
            background:#141A22;
            color:#F8FAFC;
            transition:border-color 0.2s,box-shadow 0.2s;
        }
        .topic-tag:hover{border-color:#00FFFF;box-shadow:0 0 10px rgba(0,255,255,0.3);color:#00FFFF}
        /* Animation visibility */
        .animate-on-scroll{opacity:1}
        .fade-in-up{opacity:1}
        /* SVG Icons */
        .icon{width:1em;height:1em;display:inline-block;vertical-align:-0.125em;fill:currentColor}
        .icon-lg{width:1.33em;height:1.33em}
        .icon-2x{width:2em;height:2em}
        .icon-3x{width:3em;height:3em}
        .icon-fw{width:1.25em;text-align:center}
        .icon-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}
        .icon-stack .icon{position:absolute;left:0;width:100%;text-align:center}
        .icon-stack-bg{font-size:2em}
        .icon-stack-fg{font-size:1em}
        /* Links - Cyan accent */
        a{color:#00FFFF;text-decoration:none;transition:color 0.2s}
        a:hover{color:#FF00FF}
    </style>

    <!-- Bootstrap CSS - Minimal build (Grid + Navbar + Utilities only, 20KB vs 117KB) -->
    <link rel="preload" href="{{ "/css/bootstrap-minimal.min.css" | prepend: site.baseurl }}" as="style">
    <link rel="stylesheet" href="{{ "/css/bootstrap-minimal.min.css" | prepend: site.baseurl }}" media="print" onload="this.media='all';this.onload=null;">
    <noscript><link rel="stylesheet" href="{{ "/css/bootstrap-minimal.min.css" | prepend: site.baseurl }}"></noscript>

    <!-- HTML5 Shim and Respond.js IE8 support -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "WebSite",
          "@id": "{{ site.url }}/#website",
          "url": "{{ site.url }}",
          "name": "{{ site.title }}",
          "description": "{{ site.description }}",
          "potentialAction": {
            "@type": "SearchAction",
            "target": {
              "@type": "EntryPoint",
              "urlTemplate": "{{ site.url }}/?s={search_term_string}"
            },
            "query-input": "required name=search_term_string"
          },
          "inLanguage": "zh-CN"
        }{% if page.url == '/' or page.url == '/index.html' %},
        {
          "@type": "Blog",
          "@id": "{{ site.url }}/#blog",
          "url": "{{ site.url }}/",
          "name": "{{ site.title }}",
          "description": "{{ site.description }}",
          "publisher": {
            "@id": "{{ site.url }}/#organization"
          },
          "blogPost": [{% for post in site.posts limit:5 %}{
            "@type": "BlogPosting",
            "headline": "{{ post.title | escape }}",
            "url": "{{ site.url }}{{ post.url }}",
            "datePublished": "{{ post.date | date_to_xmlschema }}"
          }{% unless forloop.last %},{% endunless %}{% endfor %}],
          "inLanguage": ["en", "zh-CN"]
        }{% endif %}{% if page.layout == 'post' %},
        {
          "@type": "Article",
          "@id": "{{ site.url }}{{ page.url }}#article",
          "isPartOf": {
            "@id": "{{ site.url }}/#website"
          },
          "author": {
            "@type": "Person",
            "name": "{{ page.author | default: site.title }}",
            "url": "{{ site.url }}/about/",
            "sameAs": [
              "https://github.com/{{ site.github_username }}",
              "https://blog.csdn.net/{{ site.csdn_username }}",
              "https://juejin.cn/user/{{ site.juejin_username }}"
            ]
          },
          "headline": "{{ page.title }}",
          "datePublished": "{{ page.date | date_to_xmlschema }}",
          "dateModified": "{% if page.updated %}{{ page.updated | date_to_xmlschema }}{% else %}{{ page.date | date_to_xmlschema }}{% endif %}",
          "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "{{ site.url }}{{ page.url }}"
          },
          "publisher": {
            "@type": "Organization",
            "name": "{{ site.title }}",
            "logo": {
              "@type": "ImageObject",
              "url": "{{ site.url }}{{ site.sidebar-avatar }}"
            }
          },
          "image": {
            "@type": "ImageObject",
            "url": "{% if page.image %}{{ site.url }}{{ page.image }}{% elsif page.header-img %}{{ site.url }}/img/{{ page.header-img }}{% else %}{{ site.url }}{{ site.sidebar-avatar }}{% endif %}",
            "width": 1200,
            "height": 630
          },
          "articleSection": "{% if page.categories %}{{ page.categories | first }}{% else %}Technology{% endif %}",
          "keywords": "{% if page.tags %}{% for tag in page.tags %}{{ tag }}{% unless forloop.last %}, {% endunless %}{% endfor %}{% else %}{{ site.keyword }}{% endif %}",
          "wordcount": "{{ content | strip_html | number_of_words }}",
          "description": "{% if page.description %}{{ page.description }}{% elsif page.excerpt %}{{ page.excerpt | strip_html | truncate:160 }}{% else %}{{ site.description }}{% endif %}"
        }{% endif %},
        {
          "@type": "Organization",
          "@id": "{{ site.url }}/#organization",
          "name": "{{ site.title }}",
          "url": "{{ site.url }}",
          "logo": {
            "@type": "ImageObject",
            "url": "{{ site.url }}{{ site.sidebar-avatar }}",
            "width": 400,
            "height": 400
          },
          "sameAs": [
            "https://github.com/{{ site.github_username }}",
            "https://blog.csdn.net/{{ site.csdn_username }}",
            "https://juejin.cn/user/{{ site.juejin_username }}",
            "https://space.bilibili.com/{{ site.bilibili_username }}"
          ]
        },
        {
          "@type": "Person",
          "@id": "{{ site.url }}/about/#person",
          "name": "Calder",
          "url": "{{ site.url }}/about/",
          "image": {
            "@type": "ImageObject",
            "url": "{{ site.url }}{{ site.sidebar-avatar }}",
            "width": 400,
            "height": 400
          },
          "sameAs": [
            "https://github.com/{{ site.github_username }}",
            "https://blog.csdn.net/{{ site.csdn_username }}",
            "https://juejin.cn/user/{{ site.juejin_username }}",
            "https://space.bilibili.com/{{ site.bilibili_username }}"
          ],
          "jobTitle": "AI Agent Architect",
          "worksFor": {
            "@type": "Organization",
            "name": "BISTU"
          },
          "knowsAbout": ["AI Agent", "Multi-Agent Systems", "Web3", "LLM Applications"],
          "description": "{{ site.sidebar-about-description | strip_html }}"
        }
      ]
    }
    </script>

    <!-- Custom Blog Styles - Load async (critical styles already inlined above) -->
    <link rel="preload" href="{{ "/css/calder-blog.min.css" | prepend: site.baseurl }}" as="style">
    <link rel="stylesheet" href="{{ "/css/calder-blog.min.css" | prepend: site.baseurl }}" media="print" onload="this.media='all';this.onload=null;">
    <noscript><link rel="stylesheet" href="{{ "/css/calder-blog.min.css" | prepend: site.baseurl }}"></noscript>

    <!-- Async tail styles (low priority, non-layout) -->
    <link rel="stylesheet" href="{{ "/css/async.css" | prepend: site.baseurl }}" media="print" onload="this.media='all';this.onload=null;">
    
    <!-- Google Analytics 4 - Deferred for better performance -->
    <!-- Moved to footer.html for non-blocking load -->

    <!-- Security Headers via Meta -->
    <!-- Note: X-Frame-Options must be set via HTTP header, not meta tag -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">

    <!-- Google AdSense - Deferred loading for better performance -->
    <!-- Loaded after page becomes interactive to avoid blocking render -->

    <!-- Non-blocking JavaScript - defer loading to not block rendering -->
    <script src="{{ "/js/webp-support.js" | prepend: site.baseurl }}" defer></script>
    <script src="{{ "/js/accessibility.js" | prepend: site.baseurl }}" defer></script>
    <script src="{{ "/js/image-optimization.js" | prepend: site.baseurl }}" defer></script>
    
    {% if site.seo_fixer_enabled and jekyll.environment == 'production' %}
    <!-- WriteSonic AI SEO Fixer (optional, off by default) -->
    <script src="https://seo-fixer.writesonic.com/site-audit/fixer-script/index.js" 
            id="wsAiSeoMb" 
            type="application/javascript" 
            async 
            defer></script>
    <script id="wsAiSeoInitScript">
      window.addEventListener('load', function() {
        if (typeof wsSEOfixer !== 'undefined') {
          wsSEOfixer.configure({
            hostURL: 'https://seo-fixer.writesonic.com',
            siteID: '68c65938da5ef3d0569cec4a'
          });
        }
      });
    </script>
    {% endif %}
    
    <!-- Service Worker Registration -->
    {% if jekyll.environment == 'production' %}
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('/sw.js').then(function(registration) {
            console.log('SW registered: ', registration);
          }).catch(function(registrationError) {
            console.log('SW registration failed: ', registrationError);
          });
        });
      }
    </script>
    {% endif %}
</head>
